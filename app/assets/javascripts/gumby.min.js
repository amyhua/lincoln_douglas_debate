!function(){"use strict";function Gumby(){this.$dom=$(document);this.isOldie=!!this.$dom.find("html").hasClass("oldie");this.click="click";this.onReady=this.onOldie=this.onTouch=false;this.uiModules={};this.inits={};this.path=$("script[gumby-path]").attr("gumby-path")||"js/libs";this.breakpoint=Number($("script[gumby-breakpoint]").attr("gumby-breakpoint"))||1024}Gumby.prototype.init=function(){var scope=this;this.$dom.ready(function(){scope.initUIModules();if(scope.onReady){scope.onReady()}if(scope.isOldie&&scope.onOldie){scope.onOldie()}if(Modernizr.touch&&scope.onTouch){scope.onTouch()}})};Gumby.prototype.ready=function(code){if(code&&typeof code==="function"){this.onReady=code}};Gumby.prototype.oldie=function(code){if(code&&typeof code==="function"){this.onOldie=code}};Gumby.prototype.touch=function(code){if(code&&typeof code==="function"){this.onTouch=code}};Gumby.prototype.debug=function(){return{$dom:this.$dom,isOldie:this.isOldie,uiModules:this.uiModules,click:this.click}};Gumby.prototype.selectAttr=function(){var i=0;for(;i<arguments.length;i++){var attr=arguments[i],dataAttr="data-"+arguments[i],gumbyAttr="gumby-"+arguments[i];if(this.is("["+dataAttr+"]")){return this.attr(dataAttr)?this.attr(dataAttr):true}else if(this.is("["+gumbyAttr+"]")){return this.attr(gumbyAttr)?this.attr(gumbyAttr):true}else if(this.is("["+attr+"]")){return this.attr(attr)?this.attr(attr):true}}return false};Gumby.prototype.addInitalisation=function(ref,code){this.inits[ref]=code};Gumby.prototype.initialize=function(ref,all){if(this.inits[ref]&&typeof this.inits[ref]==="function"){this.inits[ref](all)}};Gumby.prototype.UIModule=function(data){var module=data.module;this.uiModules[module]=data};Gumby.prototype.initUIModules=function(){var x;for(x in this.uiModules){this.uiModules[x].init()}};window.Gumby=new Gumby}();!function(){"use strict";function Checkbox($el){this.$el=$el;this.$input=this.$el.find("input[type=checkbox]");var scope=this;this.$el.on(Gumby.click,function(e){e.stopImmediatePropagation();e.preventDefault();if(scope.$input.is("[disabled]")){return}if(scope.$el.hasClass("checked")){scope.update(false)}else{scope.update(true)}}).on("gumby.check",function(){scope.update(true)}).on("gumby.uncheck",function(){scope.update(false)});if(scope.$el.hasClass("checked")){scope.update(true)}}Checkbox.prototype.update=function(check){var $span=this.$el.find("span");if(check){$span.append('<i class="icon-check" />');this.$input.prop("checked",true).end().addClass("checked").trigger("gumby.onCheck").trigger("gumby.onChange")}else{this.$input.prop("checked",false).end().find("i").remove().end().removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange")}};Gumby.addInitalisation("checkboxes",function(){$(".checkbox").each(function(){var $this=$(this);if($this.data("isCheckbox")){return true}$this.data("isCheckbox",true);new Checkbox($this)})});Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkboxes")}})}();!function(){"use strict";function RadioBtn($el){this.$el=$el;this.$input=this.$el.find("input[type=radio]");var scope=this;this.$el.on(Gumby.click,function(e){e.stopImmediatePropagation();e.preventDefault();if(scope.$input.is("[disabled]")){return}scope.update()}).on("gumby.check",function(){scope.update()});if(scope.$el.hasClass("checked")){scope.update()}}RadioBtn.prototype.update=function(){var $span=this.$el.find("span"),group='input[name="'+this.$input.attr("name")+'"]';$(".radio").has(group).removeClass("checked").find("input").prop("checked",false).end().find("i").remove();this.$input.prop("checked",true);$span.append('<i class="icon-dot" />');this.$el.addClass("checked").trigger("gumby.onChange")};Gumby.addInitalisation("radiobtns",function(){$(".radio").each(function(){var $this=$(this);if($this.data("isRadioBtn")){return true}$this.data("isRadioBtn",true);new RadioBtn($this)})});Gumby.UIModule({module:"radiobtn",events:["onChange","check"],init:function(){Gumby.initialize("radiobtns")}})}();!function($){"use strict";function Validation($this,req){this.$this=$this;this.$field=this.$this.parents(".field");this.req=req||function(){return!!this.$this.val().length};var scope=this;if(this.$this.is("[type=checkbox], [type=radio]")){this.$field=this.$this.parent("label");this.$field.on("gumby.onChange",function(){scope.validate()})}else if(this.$this.is("select")){this.$field=this.$this.parents(".picker");this.$field.on("change",function(){scope.validate()})}else{this.$this.on("blur",function(e){if(e.which!==9){scope.validate()}})}}Validation.prototype.validate=function(){var result=this.req(this.$this);if(!result){this.$field.removeClass("success").addClass("danger")}else{this.$field.removeClass("danger").addClass("success")}return result};$.fn.validation=function(options){var settings=$.extend({submit:false,fail:false,required:[]},options),validations=[];return this.each(function(){if(!settings.required.length){return false}var $this=$(this),reqLength=settings.required.length,i;for(i=0;i<reqLength;i++){validations.push(new Validation($this.find('[name="'+settings.required[i].name+'"]'),settings.required[i].validate||false))}$this.on("submit",function(e){var failed=false;if(!$this.data("passed")){e.preventDefault();var reqLength=validations.length,i;for(i=0;i<reqLength;i++){if(!validations[i].validate()){failed=true}}if(!failed){if(settings.submit&&typeof settings.submit==="function"){settings.submit($this.serializeArray());return}$this.data("passed",true).submit()}else{if(settings.fail&&typeof settings.fail==="function"){settings.fail();return}}}})})}}(jQuery);!function(){"use strict";function SkipLink($el){this.$el=$el;this.targetPos=0;this.duration=0;this.offset=false;this.easing="";this.update=false;this.setup();var scope=this;this.$el.on(Gumby.click+" gumby.skip",function(e){e.stopImmediatePropagation();e.preventDefault();if(scope.update){scope.calculateTarget(scope.skipTo)}else{scope.skipTo()}}).on("gumby.initialize",function(){scope.setup()})}SkipLink.prototype.setup=function(){this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200;this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||false;this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing";this.update=Gumby.selectAttr.apply(this.$el,["update"])?true:false;this.calculateTarget()};SkipLink.prototype.calculateTarget=function(cb){var scope=this,target=Gumby.selectAttr.apply(this.$el,["goto"]),$target;if(target=="top"){this.targetPos=0}else if($.isNumeric(target)){this.targetPos=Number(target)}else{$target=$(target);if(!$target){return false}this.targetPos=$target.offset().top}if(cb){cb.apply(this)}};SkipLink.prototype.skipTo=function(){var scope=this;$("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){scope.$el.trigger("gumby.onComplete")})};SkipLink.prototype.calculateOffset=function(){if(!this.offset){return this.targetPos}var op=this.offset.substr(0,1),off=Number(this.offset.substr(1,this.offset.length));if(op==="-"){return this.targetPos-off}else if(op==="+"){return this.targetPos+off}};Gumby.addInitalisation("skiplinks",function(all){$(".skiplink > a, .skip").each(function(){var $this=$(this);if($this.data("isSkipLink")&&!all){return true}else if($this.data("isSkipLink")&&all){$this.trigger("gumby.initialize");return true}$this.data("isSkipLink",true);new SkipLink($this)})});Gumby.UIModule({module:"skiplink",events:["onComplete","skip"],init:function(){Gumby.initialize("skiplinks")}})}();!function(){"use strict";var $html=Gumby.$dom.find("html");if(!Modernizr.touch||$(window).width()>Gumby.breakpoint){$html.addClass("gumby-no-touch");return}$html.addClass("gumby-touch");function Navbar($el){this.$el=$el;this.$dropDowns=this.$el.find("li:has(.dropdown)");var scope=this;this.$dropDowns.on("tap",this.toggleDropdown).on("swiperight",this.openLink);if(this.$dropDowns.children("a").attr("href")!=="#"){this.$dropDowns.children("a").append('<i class="icon-popup"></i>').children("i").on("tap",this.openLink)}this.$dropDowns.find(".dropdown li:not(:has(.dropdown)) a[href]").on("tap",this.openLink);$(window).on("mousemove touchstart",function(e){e.stopImmediatePropagation();if(e.type==="mousemove"){scope.$dropDowns.on("mouseover mouseout",scope.toggleDropdown)}})}Navbar.prototype.toggleDropdown=function(e){e.stopImmediatePropagation();e.preventDefault();var $this=$(this);if($this.hasClass("active")){$this.removeClass("active")}else{$this.addClass("active")}};Navbar.prototype.openLink=function(e){e.stopImmediatePropagation();e.preventDefault();var $this=$(this),$el=$this,href;if($this.is("i")){$el=$this.parent("a")}else if($this.is("li")){$el=$this.children("a")}href=$el.attr("href");if($el.attr("target")=="blank"){window.open(href)}else{window.location=href}};Gumby.addInitalisation("navbars",function(){$(".navbar").each(function(){var $this=$(this);if($this.data("isNavbar")){return true}$this.data("isNavbar",true);new Navbar($this)})});Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbars")}})}();Modernizr.load({test:Modernizr.touch,yep:Gumby.path+"/jquery.mobile.custom.min.js",callback:function(url,result,key){if($.mobile){window.Gumby.click+=" tap"}},complete:function(){window.Gumby.init();if(typeof define=="function"&&define.amd){define(window.Gumby)}}});